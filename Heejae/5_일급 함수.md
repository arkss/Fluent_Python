# 5. 일급 함수

파이썬의 함수는 일급 객체다. 아래와 같은 작업을 수행할 수 있는 프로그램 개체를 일급 객체라고 정의한다.

- 런타임에 생성할 수 있다.
- 데이터 구조체의 변수나 요소에 할당할 수 있다.
- 함수 인수로 전달할 수 있다.
- 함수 결과로 반환할 수 있다.

정수, 문자열, 딕셔너리도 파이썬의 일급 객체다.

'일급 객체로서의 함수'를 줄여서 '일급 함수'라고 부른다.

## 5.1 함수를 객체처럼 다루기

```python
>>> def factorial(n): # 콘솔 세션에서 만들고 있으므로, 함수를 런타임에 만들고 있는 것이다. (일급 본질)
...     '''returns n!'''
...     return 1 if n < 2 else n * factorial(n-1)
...
>>> factorial(42)
1405006117752879898543142606244511569936384000000000
>>> factorial.__doc__ # __doc__은 함수 객체의 여러 속성 중 하나다.
'returns n!'
>>> type(factorial)
<class 'function'>
>>> fact = factorial # 함수를 변수에 할당한다. (일급 본질)
>>> fact
<function factorial at 0x107c30a60>
>>> fact(5)
120
>>> map(factorial, range(11)) # 함수를 map()의 인수로 전달한다. (일급 본질)
<map object at 0x107c4e0a0>
>>> list(map(fact, range(11)))
[1, 1, 2, 6, 24, 120, 720, 5040, 40320, 362880, 3628800]
```

일급 함수가 있으면 함수형 프로그래밍을 할 수 있다.

## 5.2 고위 함수

**고위 함수**란 함수를 인수로 받거나, 함수를 결과로 반환하는 함수이다. 이전 절에서 확인 한 map()도 고위 함수이다.

sorted() 내장 함수도 key인수로 `len` 등의 함수를 인자로 받으므로 일급 함수이다.

### 5.2.1 map(), filter(), reduce()의 대안

map, filter, reduce 고위 함수는 여전히 존재하지만, 대부분의 경우 더 나은 다른 방법이 있다.
지능형 리스트나 제너레이터 표현식이 map()과 filter()의 조합이 처리하는 작업을 표현 할 수 있을 뿐만 아니라 가독성도 더 좋기 때문이다.

```python
>>> list(map(fact, range(11)))
[1, 1, 2, 6, 24, 120, 720, 5040, 40320, 362880, 3628800]
>>> list(map(fact, range(6)))
[1, 1, 2, 6, 24, 120]
>>> [fact(n) for n in range(6)]
[1, 1, 2, 6, 24, 120]
>>> list(map(factorial, filter(lambda n: n % 2, range(6))))
[1, 6, 120]
>>> [factorial(n) for n in range(6) if n % 2]
[1, 6, 120]
```

reduce()보다는 sum()을 사용하는 것이 더 좋다

```python
>>> from functools import reduce
>>> from operator import add
>>> reduce(add, range(100))
4950
>>> sum(range(100))
4950
```

그 외 내장된 리덕션 함수로는 all과 any가 있다

- `all(iterable)` : 모든 iterable이 참된 값이면 True를 반환한다. all([])은 True를 반환한다.
- `any(iterable)` : iterable 중 하나라도 참된 값이면 True를 반환한다. any([])는 False를 반환한다.
